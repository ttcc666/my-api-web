# 文档结构说明

## 📁 整体结构

本项目采用分离式文档管理：
- **配置文件**：位于应用目录 `1-Presentation/MyApiWeb.Api/appsettings/`
- **文档说明**：集中在 `doc/` 目录

```
backend/
├── 1-Presentation/MyApiWeb.Api/
│   ├── appsettings.json                      # 主配置文件（简化版）
│   └── appsettings/                          # 📌 模块化配置文件
│       ├── README.md                         # 简要说明（指向完整文档）
│       ├── database.json                     # 数据库配置
│       ├── jwt.json                          # JWT 认证配置
│       ├── cors.json                         # CORS 跨域配置
│       ├── cap.json                          # CAP 消息总线配置
│       ├── serilog.json                      # Serilog 日志配置
│       ├── database.Production.json.example  # 生产环境配置示例
│       └── jwt.Production.json.example       # 生产环境配置示例
│
└── doc/                                      # 📚 文档中心
    ├── README.md                             # 文档总索引
    │
    ├── configuration/                        # 📖 配置文档目录
    │   ├── INDEX.md                          # 配置文档索引和导航
    │   ├── QUICK_START.md                    # 快速开始指南（5分钟上手）
    │   ├── README.md                         # 详细配置说明（完整参考）
    │   ├── MIGRATION_GUIDE.md                # 配置迁移指南（从旧版迁移）
    │   └── 文档结构说明.md                   # 本文件
    │
    └── CAP_SqlSugar_Integration_Guide.md     # CAP 集成指南
```

## 🎯 设计理念

### 为什么这样组织？

1. **配置与文档分离**
   - 配置文件与应用代码在一起，便于直接使用
   - 文档集中管理，便于统一维护和查阅

2. **文档分层设计**
   - `appsettings/README.md`：简要说明，指向详细文档
   - `doc/configuration/`：详细完整的配置文档
   - `doc/README.md`：项目所有文档的入口

3. **职责清晰**
   - `appsettings/`：存放实际配置文件
   - `doc/configuration/`：存放配置说明文档
   - `doc/`：存放所有技术文档

## 📖 文档层级

### 第一层：快速引导
**位置**：`appsettings/README.md`

**目的**：
- 快速说明配置文件的作用
- 提供最基本的配置步骤
- 指向详细文档

**适用对象**：需要快速了解配置文件的开发者

### 第二层：配置索引
**位置**：`doc/configuration/INDEX.md`

**目的**：
- 提供配置文档的导航
- 根据角色和需求推荐文档
- 快速链接到常见任务

**适用对象**：不确定应该看哪个文档的用户

### 第三层：专题文档
**位置**：`doc/configuration/` 下的各个文档

**包含**：
1. **QUICK_START.md** - 快速开始
   - 最小化配置步骤
   - 常见场景示例
   - 快速验证方法

2. **README.md** - 详细说明
   - 完整的配置选项说明
   - 环境管理
   - 安全最佳实践
   - 配置优先级

3. **MIGRATION_GUIDE.md** - 迁移指南
   - 从旧配置迁移步骤
   - CI/CD 更新
   - 常见问题解答

### 第四层：项目文档总览
**位置**：`doc/README.md`

**目的**：
- 项目所有文档的入口
- 按角色和主题分类
- 提供快速导航

## 🔍 文档查找路径

### 场景 1：我是新手，想快速开始
```
路径 1（最快）：
appsettings/README.md → QUICK_START.md

路径 2（完整）：
doc/README.md → configuration/INDEX.md → QUICK_START.md
```

### 场景 2：我需要详细了解某个配置
```
路径：
doc/README.md → configuration/README.md → 查找对应章节
```

### 场景 3：我要迁移配置
```
路径：
doc/README.md → configuration/MIGRATION_GUIDE.md
```

### 场景 4：我要查看所有文档
```
路径：
doc/README.md → 浏览所有文档分类
```

## 📝 文档维护规范

### 添加新配置模块

1. 在 `appsettings/` 创建新的 `.json` 配置文件
2. 在 `configuration/README.md` 添加配置说明
3. 在 `configuration/QUICK_START.md` 添加快速配置示例
4. 更新 `configuration/INDEX.md` 的配置模块列表
5. 更新 `appsettings/README.md` 的文件列表

### 添加新文档

1. 在 `doc/` 或相应子目录创建文档
2. 在 `doc/README.md` 添加文档链接
3. 如果是配置相关，同步更新 `configuration/INDEX.md`

### 文档更新检查清单

- [ ] 更新日期和版本号
- [ ] 检查所有链接是否有效
- [ ] 验证代码示例可运行
- [ ] 更新相关索引文件
- [ ] 同步更新简要说明

## 🔗 文档链接规范

### 相对路径示例

```markdown
# 从 configuration/QUICK_START.md 链接到其他文档

[配置详细说明](./README.md)                    # 同目录
[迁移指南](./MIGRATION_GUIDE.md)               # 同目录
[文档中心](../README.md)                       # 上级目录
[CAP 集成指南](../CAP_SqlSugar_Integration_Guide.md)  # 上级目录

# 从 doc/README.md 链接到配置文档

[配置文档索引](./configuration/INDEX.md)       # 下级目录
[快速开始](./configuration/QUICK_START.md)     # 下级目录

# 从 appsettings/README.md 链接到 doc

[快速开始指南](../../../doc/configuration/QUICK_START.md)  # 跨目录
```

## 📊 文档类型

### 1. 索引型文档
- `doc/README.md` - 项目文档总索引
- `configuration/INDEX.md` - 配置文档索引
- `appsettings/README.md` - 配置文件简要说明

**特点**：
- 提供导航和快速链接
- 按角色和主题分类
- 不包含详细技术内容

### 2. 指南型文档
- `QUICK_START.md` - 快速开始指南
- `MIGRATION_GUIDE.md` - 迁移指南

**特点**：
- 面向特定任务
- 提供分步骤说明
- 包含实际示例

### 3. 参考型文档
- `configuration/README.md` - 详细配置说明
- `CAP_SqlSugar_Integration_Guide.md` - 集成指南

**特点**：
- 完整的技术细节
- 深入的说明
- 最佳实践和注意事项

### 4. 说明型文档
- `文档结构说明.md` - 本文件

**特点**：
- 元信息和组织结构
- 维护规范
- 设计理念

## 🎯 文档目标用户

| 文档 | 新手 | 开发者 | 运维 | 架构师 |
|------|------|--------|------|--------|
| QUICK_START.md | ✅✅✅ | ✅✅ | ✅ | - |
| README.md | ✅ | ✅✅✅ | ✅✅✅ | ✅✅ |
| MIGRATION_GUIDE.md | - | ✅ | ✅✅✅ | ✅✅ |
| INDEX.md | ✅✅ | ✅ | ✅ | ✅ |
| doc/README.md | ✅✅ | ✅✅ | ✅✅ | ✅✅ |

✅✅✅ 强烈推荐 | ✅✅ 推荐 | ✅ 可选 | - 不适用

## 🔄 文档更新流程

```
1. 配置变更
   ↓
2. 更新对应的 .json 配置文件
   ↓
3. 更新 configuration/README.md（详细说明）
   ↓
4. 更新 configuration/QUICK_START.md（如有新场景）
   ↓
5. 更新 configuration/INDEX.md（如有新模块）
   ↓
6. 更新 appsettings/README.md（如有新配置文件）
   ↓
7. 更新 doc/README.md（如需要）
   ↓
8. 提交代码和文档
```

## 📌 重要提示

1. **配置文件和文档同步更新**
   - 添加新配置必须同步更新文档
   - 修改配置必须同步更新说明

2. **保持链接有效**
   - 移动文档时更新所有相关链接
   - 定期检查链接有效性

3. **版本控制**
   - 文档包含版本号和更新日期
   - 重大更新时更新版本号

4. **示例代码可运行**
   - 文档中的代码示例必须经过测试
   - 配置示例必须符合实际项目

## 🆘 常见问题

### Q: 我应该在哪里查找配置说明？
**A:** 
1. 快速查看：`appsettings/README.md`
2. 详细说明：`doc/configuration/README.md`

### Q: 我应该在哪里添加新的技术文档？
**A:**
- 配置相关：`doc/configuration/`
- 集成指南：`doc/` 根目录
- 更新 `doc/README.md` 索引

### Q: 文档太多了，不知道从哪里开始？
**A:** 
1. 先看 `doc/README.md` 了解整体结构
2. 根据你的角色查看推荐文档
3. 使用 `configuration/INDEX.md` 快速导航

---

**文档版本**: 1.0  
**创建日期**: 2024-01-16  
**维护者**: 开发团队